const TelegramBotApi = require('node-telegram-bot-api')

const token = '...'

const bot = new TelegramBotApi(token, {polling: true})
const users = require('./users.json')

setInterval(() => {
    require('fs').writeFileSync('./users.json', JSON.stringify(users, null, '\t'))
}, 8000)



bot.on('message', msg => {
    var user = users.filter(x => x.id === msg.from.id)[0]
    if(!user){
        users.push({
            id: msg.from.id,
            nick: msg.from.username,
            status: '–ü–æ–ª—å–∑–æ–≤–æ—Ç–µ–ª—å',
            geoposition: null,
            tell: null,
            payments: null

        })
        user = users.filter(x => x.id === msg.from.id)[0]
    }
})


const H1MarkUp = {
    reply_markup: JSON.stringify({
        inline_keyboard: [
            [{text: 'üçè –ü—É–Ω–∫—Ç–∏ —Ö–∞—Ä—á—É–≤–∞–Ω–Ω—è', callback_data:`punkt1`}],
            [{text: 'üöë –ü—É–Ω–∫—Ç–∏ —Ç–æ–≤–∞—Ä—ñ–≤ –ø–µ—Ä—à–æ—ó –¥–æ–ø–æ–º–æ–≥–∏ —Ç–∞ —Ç–∞–±–∞–∫', callback_data:`punkt2`}],
            [{text: 'üöó –ü—É–Ω–∫—Ç–∏ —î–≤–∞–∫—É–∞—Ü—ñ—ó', callback_data:`punkt3`}],
            [{text: 'üõ¢ –ó–∞–ø—Ä–∞–≤–∫–∏ –ø–∞–ª—å–Ω–æ–≥–æ —Ç–∞ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å', callback_data:`punkt4`}],
            [{text: 'üìî –°–ø—Ä–∞–≤–æ—á–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è', callback_data:`punkt5`}],
            [{text: 'üßë‚Äçüè≠ –í—Ç—Ä–∞—Ç–∏–≤ —Ä–æ–±–æ—Ç—É - –∑–∞—Ä–æ–±–ª—è–π –≥—Ä–æ—à—ñ', callback_data:`punkt6`}],
            [{text: 'üì≤ –ü–æ–≤—ñ–¥–æ–º–∏—Ç–∏ –ø—Ä–æ –∑–∞–ø—Ä–∞–≤–∫—É –∑ –±–µ–Ω–∑–∏–Ω–æ–º, –ø—É–Ω–∫—Ç–∏ –¥–æ–ø–æ–º–æ–≥–∏', callback_data:`punkt7`}],
            [{text: 'üë®‚Äçüíª –î–æ–ø–æ–º–æ–≥—Ç–∏ –ø—Ä–æ–µ–∫—Ç—É', callback_data:`punkt8`}],
        ]
    })
}

const MapTegs = {
    reply_markup: JSON.stringify({
        inline_keyboard: [
            [{text: 'üá∫üá¶ –ö–∏—ó–≤', callback_data:`KIEV`}],
            [{text: 'üá∫üá¶ –ß–ï–†–ù–Ü–í–¶–Ü', callback_data:`CERNIBSI`}],
            [{text: 'üá∫üá¶ –í–ò–ù–ù–ò–¶–ê', callback_data:`VINNISA`}], 
            [{text: 'üá∫üá¶ –ù–∏–∫–æ–ª–∞–µ–≤', callback_data:`NIKOLAEV`}],
            [{text: 'üá∫üá¶ –•–∞—Ä—å–∫–æ–≤', callback_data:`HARKOV`}],
            [{text: 'üá∫üá¶ –ü–æ–ª—Ç–∞–≤–∞', callback_data:`POLATOV`}],
            [{text: 'üá∫üá¶ –ß–µ—Ä–∫–∞—Å–∏', callback_data:`CHERKACI`}],
            [{text: 'üá∫üá¶ –£–∂–≥–æ—Ä–æ–¥', callback_data:`UCHGOROD`}],
        ]
    })
}

const YesOrNo = {
    reply_markup: JSON.stringify({
        inline_keyboard: [
            [{text: '–¢–∞–∫', callback_data:`Yes`}, {text: '–ù–µ—Ç', callback_data:`no`}]
        ]
    })
}


bot.setMyCommands([
    {command: 'start', description:'–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è'}
])




bot.on('message', msg =>{

    
    const chatId = msg.chat.id
    const text = msg.text
    const nname = msg.chat.first_name

    console.log(nname, text, chatId)

    
    if(text === '/start'){
        bot.sendMessage(chatId, '‚ùóÔ∏è –ü—Ä–∏–≤—ñ—Ç, —Ü–µ–π –±–æ—Ç –¥–æ–ø–æ–º–æ–∂–µ —Ç–æ–±—ñ —É –≤—ñ–π—Å—å–∫–æ–≤–∏–π —á–∞—Å. –í–∏–±–∏—Ä–∞–π —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—é.', H1MarkUp)

    }
    

})


bot.on('callback_query', msg => {
    
    const chatId = msg.message.chat.id
    const data = msg.data

    if(data === 'punkt6'){
        bot.sendMessage(chatId, '—è–∫—â–æ —î –ø—Ä–æ–±–ª–µ–º–∞ –∑ –¥–æ—Ö–æ–¥–æ–º, –∑–ø, —Ç–æ—â–æ, —è–∫—ñ —î —ñ–¥–µ—ó, —Å—Ç–∞—Ä—Ç–∞–ø–∏? —î –æ–±–ª–∞–¥–Ω–∞–Ω–Ω—è, —Å–µ—Ä–≤–µ—Ä–∏, —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç, –º–æ–∂–Ω–ø–∞ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏', YesOrNo)
    }
    
})


bot.on('callback_query', msg => {
    
    const chatId = msg.message.chat.id
    const data = msg.data

    if(data === 'punkt1'){
        bot.sendMessage(chatId, '–ó–Ω–∞–π–¥—ñ—Ç—å –ø—É–Ω–∫—Ç–∏ –∂–∏–≤–ª–µ–Ω–Ω—è –≤ —Å–≤–æ—î–º—É –º—ñ—Å—Ç—ñ.', MapTegs)
    }
    if(data == 'KIEV'){
        bot.sendMessage(chatId, `
        üá∫üá¶ –ö–∏—ó–≤
        --------------------------------
        –ü—Ä—è–º–∞ –¥–æ—Å—Ç–∞–≤–∫–∞ —ó–¥–∏ (–ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ).
    
            097-309-11-11 - –á–∂–∞.  
        --------------------------------
        –ü—ñ–¥–ø—Ä–∏—î–º—Ü—ñ –ö–∏—î–≤–∞:

            066 814 18 23 - —Ü–µ–Ω—Ç—Ä
            067 991 06 31 - –ª—ñ–≤–∏–π –±–µ—Ä–µ–≥
            063 347 24 16 - –ø—Ä–∞–≤–∏–π –±–µ—Ä–µ–≥
        --------------------------------

        0938032030 - –ø—Ä–∞–≤–∏–π –±–µ—Ä—ñ–≥

        0508092452 - –ú–∞—Ä–∫, –¥–æ—Å—Ç–∞–≤–∫–∞/—Å–∞–º–æ–≤–∏–≤—ñ–∑ –ø—Ä–∞–≤–∏–π –±–µ—Ä—ñ–≥

        --------------------------------
–°–ø–∞—Å–æ-–ü—Ä–µ–æ–±—Ä–∞–∂–µ–Ω—Å—å–∫–∏–π —Å–æ–±–æ—Ä
3a, Marshala Koneva Str. –ö–∏–µ–≤, –£–∫—Ä–∞–∏–Ω–∞ 03191
–ø—Ä–æ–¥—É–∫—Ç–∏ —Ö–∞—Ä—á—É–≤–∞–Ω–Ω—è, –æ–¥—è–≥, –∑–∞—Å–æ–±–∏ –≥—ñ–≥—ñ—î–Ω–∏, –¥–∏—Ç—è—á—ñ –ø—ñ–¥–≥—É–∑–Ω–∏–∫–∏, –æ–±—ñ–≥—Ä—ñ–≤ –±—ñ–∂–µ–Ω—Ü—ñ–≤, —Ç–æ—â–æ

    `)
    

    }

    if(data === 'CERNIBSI'){
        bot.sendMessage(chatId, `
        üá∫üá¶ –ß–ï–†–ù–Ü–í–¶–Ü
        --------------------------------
        –°–æ–±–æ—Ä–Ω–∞ –ø–ª–æ—â–∞
        –ü–µ—Ä–µ—Ö—Ä–µ—Å—Ç—è –ø—Ä–æ—Å–ø–µ–∫—Ç—É –ù–µ–∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ 
             —Ç–∞ –≤—É–ª. –ù–µ–±–µ—Å–Ω–æ—ó –°–æ—Ç–Ω—ñ (–Ω–∞–≤–ø—Ä–æ—Ç–∏ –¢–¶ ¬´–§–æ—Ä–º–∞—Ä–∫–µ—Ç¬ª)
        
        –°–∏–Ω–µ–ª—å–Ω–∏–∫–æ–≤–æ
        –í–æ–ª–æ–Ω—Ç–µ—Ä—Å—å–∫–∏–π —Ü–µ–Ω—Ç—Ä –ø—Ä–æ–¥–æ–≤–∂–∏–≤ —Å–≤–æ—é —Ä–æ–±–æ—Ç—É. –ó—ñ–±—Ä–∞–Ω—ñ 
              –ø—Ä–æ–¥—É–∫—Ç–∏, —Ç–µ–ø–ª—ñ —Ä–µ—á—ñ, –∑–∞—Å–æ–±–∏ –≥—ñ–≥—ñ—î–Ω–∏ –ø–µ—Ä–µ–¥–∞–ª–∏ –Ω–∞ –º—ñ—Å—å–∫—ñ
                    –ø—É–Ω–∫—Ç–∏ —Ö–∞—Ä—á—É–≤–∞–Ω–Ω—è –≤—ñ–π—Å—å–∫–æ–≤–∏—Ö —Ç–∞ –±—ñ–∂–µ–Ω—Ü—ñ–≤
        --------------------------------

        `)
    }

    if(data === 'VINNISA'){
        bot.sendMessage(chatId, `
        üá∫üá¶ –í–ò–ù–ù–ò–¶–ê
        --------------------------------
        –ù–∞–º–µ—Ç–∏ –ø–æ–±–ª–∏–∑—É –∑–∞–ª—ñ–∑–Ω–∏—á–Ω–æ–≥–æ –≤–æ–∫–∑–∞–ª—É - —Ü—ñ–ª–æ–¥–æ–±–æ–≤–µ —á–µ—Ä–≥—É–≤–∞–Ω–Ω—è —Ç–∞  
            –æ–±—ñ–≥—Ä—ñ–≤, –ø–æ–±–ª–∏–∑—É –Ω–∞–º–µ—Ç—ñ–≤ –æ—Ä–≥–∞–Ω—ñ–∑–æ–≤–∞–Ω—ñ –ø—É–Ω–∫—Ç–∏ —Ö–∞—Ä—á—É–≤–∞–Ω–Ω—è.
        --------------------------------

        `)
    }
    if(data === 'NIKOLAEV'){
        bot.sendMessage(chatId, `
        üá∫üá¶ –ù–∏–∫–æ–ª–∞–µ–≤
        --------------------------------
        –ó–∞–≤–æ–¥—Å–∫–∏–π —Ä–∞–π–æ–Ω:
        —É–ª. –ö—É–∑–Ω–µ—Ü–∫–∞—è, 1, —Ç–µ–ª. 47-71-22;
        –ò–Ω–≥—É–ª—å—Å–∫–∏–π —Ä–∞–π–æ–Ω:
        —É–ª. 12 –ü—Ä–æ–¥–æ–ª—å–Ω–∞—è, 50-–ê, —Ç–µ–ª. 21-20-48;
        –ö–æ—Ä–∞–±–µ–ª—å–Ω—ã–π —Ä–∞–π–æ–Ω:
        —É–ª. –ú–µ—Ç–∞–ª–ª—É—Ä–≥–æ–≤, 8, —Ç–µ–ª. 64-59-98;
        –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–∞–π–æ–Ω:
        —É–ª. –®–µ–≤—á–µ–Ω–∫–æ, 19-–ê, —Ç–µ–ª. 47-59-93.
        --------------------------------

        `)
    }
    if(data === 'HARKOV'){
        bot.sendMessage(chatId, `
        üá∫üá¶ –•–∞—Ä—å–∫–æ–≤
        --------------------------------   
        https://glavnoe.ua/news/n357081855-punkty-vydachi-gumanitarnoj-pomoschi-rabotajut-v-35-pochtovyh-otdelenijah-harkova
        
        –ê–¥—Ä–µ—Å–∞ –ø—É–Ω–∫—Ç–æ–≤ –≤—ã–¥–∞—á–∏ –≥—É–º–∞–Ω–∏—Ç–∞—Ä–Ω–æ–π –ø–æ–º–æ—â–∏ –≤ —Å–µ—Ç–∏ 
        
        ¬´–ù–æ–≤–∞—è –ø–æ—á—Ç–∞¬ª: 
         –ø—Ä. –õ—é–¥–≤–∏–≥–∞ –°–≤–æ–±–æ–¥—ã, 35; 
         —É–ª. –ê—Ö—Å–∞—Ä–æ–≤–∞, 21;
         –ø–µ—Ä. –ü–∏—Å–∫—É–Ω–æ–≤—Å–∫–∏–π, 4; 
         –ø—Ä. –ì–∞–≥–∞—Ä–∏–Ω–∞, 54-–∞, 176, 199; 
         —É–ª. –ê–º–æ—Å–æ–≤–∞, 11; 
         –ø—Ä–æ–µ–∑–¥ –°—Ç–∞–¥–∏–æ–Ω–Ω—ã–π, 13; 
         –ø—Ä. –ì–µ—Ä–æ–µ–≤ –°—Ç–∞–ª–∏–Ω–≥—Ä–∞–¥–∞, 169/24; —É–ª. –õ—É–∏ –ü–∞—Å—Ç–µ—Ä–∞, 318;
         —É–ª. –ù—å—é—Ç–æ–Ω–∞, 98;
         –ø—Ä. –õ—å–≤–∞ –õ–∞–Ω–¥–∞—É, 46;
         –ø—Ä. –ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä–∞ –ê–ª–µ—à–∏–Ω–∞, 5;
         –ø—Ä. –ò–Ω–¥—É—Å—Ç—Ä–∏–∞–ª—å–Ω—ã–π, 24/31;
         —É–ª. –®–µ–≤—á–µ–Ω–∫–æ, 24-–∞;
         —É–ª. –ü—É—à–∫–∏–Ω—Å–∫–∞—è, 96.
        
        –ê–¥—Ä–µ—Å–∞ –ø—É–Ω–∫—Ç–æ–≤ –≤—ã–¥–∞—á–∏ –≥—É–º–∞–Ω–∏—Ç–∞—Ä–Ω–æ–π –ø–æ–º–æ—â–∏ –≤ —Å–µ—Ç–∏ 
        
        ¬´–£–∫—Ä–ø–æ—á—Ç–∞¬ª:
         —É–ª. –î–µ—Ä–µ–≤—è–Ω–∫–æ, 50; 
         —É–ª. –ë–µ—Ä–∫–æ—Å–∞, 26; 
         —É–ª. –ê–∫–∞–¥–µ–º–∏–∫–æ–≤ –ê—Ö–∏–µ–∑–µ—Ä–æ–≤, 16/50; 
         —É–ª. –ü–µ—Ç—Ä–∞ –ë–æ–ª–±–æ—á–∞–Ω–∞, 3, 46;
         —É–ª. –•–æ–ª–æ–¥–Ω–æ–≥–æ—Ä—Å–∫–∞—è, 7;
         —É–ª. –ö–∏—Ç–∞–µ–Ω–∫–æ, 4;
         –ø—Ä. –õ—å–≤–∞ –õ–∞–Ω–¥–∞—É, 20;
         —É–ª. –ê–∫–∞–¥–µ–º–∏–∫–∞ –ü—Ä–æ—Å–∫—É—Ä—ã, 9-–±;
         —É–ª. –®–µ–≤—á–µ–Ω–∫–æ, 224;
         —É–ª. –ì–≤–∞—Ä–¥–µ–π—Ü–µ–≤-–®–∏—Ä–æ–Ω–∏–Ω—Ü–µ–≤, 41;
         —É–ª. –í–∞–ª–µ–Ω—Ç–∏–Ω–æ–≤—Å–∫–∞—è, 31;
         –ø—Ä. –Æ–±–∏–ª–µ–π–Ω—ã–π, 49-–∞, 57/106;
         —É–ª. –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∞—è, 181;
         —É–ª. –ê–º–æ—Å–æ–≤–∞, 5;
         –ø—Ä. –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤—Å–∫–∏–π, 113;
         —É–ª. –†—ã–±–∞–ª–∫–∞, 40;
         –ø—Ä. –ú–æ—Å–∫–æ–≤—Å–∫–∏–π, 259.
        --------------------------------

        `)
    }
    if(data === 'POLATOV'){
        bot.sendMessage(chatId, `
        üá∫üá¶ –ü–æ–ª—Ç–∞–≤–∞
        --------------------------------
        –ü—É–Ω–∫—Ç–∏ –≤–∏–¥–∞—á—ñ —Ä–µ—á–µ–π, –ª—ñ–∫—ñ–≤, –∞–¥—Ä–µ—Å–∏ –Ω–∞–¥–∞–Ω–Ω—è –º–µ–¥–∏—á–Ω–æ—ó –¥–æ–ø–æ–º–æ–≥–∏ —Ç–∞ —Ö–∞—Ä—á—É–≤–∞–Ω–Ω—è 
        
        https://poltavawave.com.ua/p/de-v-poltavi-mozhut-otrimati-dopomogu-vimusheni-bizhentsi-617273?fbclid=IwAR0guw_hAuN2laW_VSc_rRWf05go8ahMtF5fVb9gp4FOcPPv-eEFL17g2nE
        --------------------------------

        `)
    }
    if(data === 'CHERKACI'){
        bot.sendMessage(chatId, `
        üá∫üá¶ –ß–µ—Ä–∫–∞—Å–∏
        --------------------------------

         –ü—É–Ω–∫—Ç–∏ –ø—Ä–∏–π–æ–º—É –ø–µ—Ä–µ—Å–µ–ª–µ–Ω—Ü—ñ–≤ —Å—Ç–≤–æ—Ä–µ–Ω—ñ —Ü–µ—Ä–∫–≤–æ—é ¬´–ü–µ—Ä–µ–º–æ–≥–∞¬ª –º. –ß–µ—Ä–∫–∞—Å–∏
        --------------------------------

        `)
    }
    if(data === 'UCHGOROD'){
        bot.sendMessage(chatId, `
        üá∫üá¶ –£–∂–≥–æ—Ä–æ–¥
        --------------------------------

        –ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π –ø—É–Ω–∫—Ç –ø—Ä–∏–π–æ–º—É –ø–µ—Ä–µ—Å–µ–ª–µ–Ω—Ü—ñ–≤ 
        --------------------------------

        `)
    }
})

